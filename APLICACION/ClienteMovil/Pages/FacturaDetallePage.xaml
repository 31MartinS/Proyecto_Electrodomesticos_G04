<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ClienteMovil.Pages.FacturaDetallePage"
             Title="Detalle de Factura"
             BackgroundColor="#FFFFFF">
    
    <ScrollView>
        <VerticalStackLayout Padding="15" Spacing="15">
            
            <!-- Información de la Factura -->
            <Frame BorderColor="#4A90E2" 
                   CornerRadius="10" 
                   Padding="15"
                   HasShadow="True">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Información de la Factura"
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="#000000"/>
                    
                    <Grid ColumnDefinitions="Auto,*" RowSpacing="5">
                        <Label Grid.Column="0" Text="Número:" FontAttributes="Bold" TextColor="#000000"/>
                        <Label Grid.Column="1" x:Name="LblNumero" TextColor="#000000"/>
                        
                        <Label Grid.Row="1" Grid.Column="0" Text="Fecha:" FontAttributes="Bold" TextColor="#000000"/>
                        <Label Grid.Row="1" Grid.Column="1" x:Name="LblFecha" TextColor="#000000"/>
                        
                        <Label Grid.Row="2" Grid.Column="0" Text="Cliente:" FontAttributes="Bold" TextColor="#000000"/>
                        <Label Grid.Row="2" Grid.Column="1" x:Name="LblCliente" TextColor="#000000"/>
                        
                        <Label Grid.Row="3" Grid.Column="0" Text="Forma de Pago:" FontAttributes="Bold" TextColor="#000000"/>
                        <Label Grid.Row="3" Grid.Column="1" x:Name="LblFormaPago" TextColor="#000000"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Productos -->
            <Frame BorderColor="#D9D9D9" 
                   CornerRadius="10" 
                   Padding="15"
                   HasShadow="True">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Productos Comprados"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="#000000"/>
                    
                    <StackLayout x:Name="StackProductos" Spacing="10">
                        <!-- Los productos se cargarán dinámicamente -->
                    </StackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Totales -->
            <Frame BorderColor="#96FF96" 
                   CornerRadius="10" 
                   Padding="15"
                   HasShadow="True">
                <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto,Auto" RowSpacing="8">
                    <Label Grid.Row="0" Grid.Column="0" Text="Subtotal:" FontSize="16" TextColor="#000000"/>
                    <Label Grid.Row="0" Grid.Column="1" x:Name="LblSubtotal" FontSize="16" TextColor="#000000" FontAttributes="Bold"/>
                    
                    <Label Grid.Row="1" Grid.Column="0" x:Name="LblDescuentoLabel" Text="Descuento (33%):" FontSize="16" TextColor="#000000"/>
                    <Label Grid.Row="1" Grid.Column="1" x:Name="LblDescuento" FontSize="16" TextColor="#F46A6A" FontAttributes="Bold"/>
                    
                    <BoxView Grid.Row="2" Grid.ColumnSpan="2" HeightRequest="1" Color="#D9D9D9"/>
                    
                    <Label Grid.Row="2" Grid.Column="0" Text="TOTAL:" FontSize="20" FontAttributes="Bold" TextColor="#000000"/>
                    <Label Grid.Row="2" Grid.Column="1" x:Name="LblTotal" FontSize="20" FontAttributes="Bold" TextColor="#4A90E2"/>
                </Grid>
            </Frame>

            <!-- Tabla de Amortización (solo para créditos) -->
            <Frame x:Name="FrameAmortizacion" 
                   IsVisible="False"
                   BorderColor="#FFD700" 
                   CornerRadius="10" 
                   Padding="15"
                   HasShadow="True">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Tabla de Amortización"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="#000000"
                           HorizontalOptions="Center"/>
                    
                    <ScrollView Orientation="Horizontal">
                        <StackLayout x:Name="StackAmortizacion" Spacing="5">
                            <!-- La tabla se cargará dinámicamente -->
                        </StackLayout>
                    </ScrollView>
                </VerticalStackLayout>
            </Frame>

            <!-- Botón Volver -->
            <Button Text="VOLVER"
                    BackgroundColor="#D9D9D9"
                    TextColor="#000000"
                    FontAttributes="Bold"
                    CornerRadius="25"
                    HeightRequest="50"
                    Margin="0,10,0,20"
                    Clicked="OnVolverClicked"/>
            
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
